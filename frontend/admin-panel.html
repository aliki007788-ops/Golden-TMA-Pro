<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Golden TMA Pro - Admin Panel</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: #0f172a;
      color: #f8fafc;
      min-height: 100vh;
    }
    
    .admin-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .admin-header {
      background: linear-gradient(135deg, #1e293b, #0f172a);
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      border: 2px solid #FFD700;
    }
    
    .admin-title {
      font-size: 2.5rem;
      color: #FFD700;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .admin-title i {
      font-size: 3rem;
    }
    
    .admin-subtitle {
      color: #94a3b8;
      font-size: 1.1rem;
    }
    
    .admin-stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: #1e293b;
      border-radius: 12px;
      padding: 25px;
      border: 1px solid #334155;
      transition: all 0.3s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      border-color: #FFD700;
      box-shadow: 0 10px 20px rgba(255, 215, 0, 0.2);
    }
    
    .stat-value {
      font-size: 2.8rem;
      font-weight: bold;
      color: #FFD700;
      margin-bottom: 10px;
    }
    
    .stat-label {
      color: #94a3b8;
      font-size: 1rem;
    }
    
    .admin-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    
    .tab-btn {
      padding: 12px 24px;
      background: #1e293b;
      border: 1px solid #334155;
      color: #cbd5e1;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
    }
    
    .tab-btn.active {
      background: #FFD700;
      color: #000;
      border-color: #FFD700;
    }
    
    .tab-content {
      display: none;
      background: #1e293b;
      border-radius: 15px;
      padding: 25px;
      border: 1px solid #334155;
    }
    
    .tab-content.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .table-container {
      overflow-x: auto;
    }
    
    .data-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .data-table th {
      background: #334155;
      color: #FFD700;
      padding: 15px;
      text-align: left;
      font-weight: 600;
    }
    
    .data-table td {
      padding: 15px;
      border-bottom: 1px solid #475569;
      color: #e2e8f0;
    }
    
    .data-table tr:hover {
      background: rgba(255, 215, 0, 0.1);
    }
    
    .status-paid {
      background: rgba(34, 197, 94, 0.2);
      color: #22c55e;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.9rem;
    }
    
    .status-pending {
      background: rgba(234, 179, 8, 0.2);
      color: #eab308;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.9rem;
    }
    
    .status-failed {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.9rem;
    }
    
    .admin-controls {
      display: flex;
      gap: 15px;
      margin-top: 30px;
      flex-wrap: wrap;
    }
    
    .control-btn {
      padding: 12px 24px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .export-btn {
      background: #10b981;
      color: white;
    }
    
    .refresh-btn {
      background: #3b82f6;
      color: white;
    }
    
    .logout-btn {
      background: #ef4444;
      color: white;
    }
    
    .control-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    .search-box {
      flex: 1;
      padding: 12px 20px;
      border-radius: 8px;
      border: 1px solid #475569;
      background: #1e293b;
      color: white;
      font-size: 1rem;
    }
    
    .search-box:focus {
      outline: none;
      border-color: #FFD700;
    }
    
    .chart-container {
      background: #1e293b;
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 30px;
      border: 1px solid #334155;
    }
    
    .chart-title {
      color: #FFD700;
      margin-bottom: 20px;
      font-size: 1.5rem;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
    }
    
    .tool-badge {
      background: rgba(59, 130, 246, 0.2);
      color: #3b82f6;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.85rem;
      margin: 2px;
      display: inline-block;
    }
    
    .date-filter {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .date-input {
      padding: 10px 15px;
      border-radius: 8px;
      border: 1px solid #475569;
      background: #1e293b;
      color: white;
    }
    
    @media (max-width: 768px) {
      .admin-stats-grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
      
      .admin-title {
        font-size: 2rem;
      }
      
      .stat-value {
        font-size: 2.2rem;
      }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="admin-container">
    <!-- Ù‡Ø¯Ø± Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† -->
    <div class="admin-header">
      <div class="admin-title">
        <i class="fas fa-crown"></i>
        Golden TMA Pro - Admin Panel
      </div>
      <div class="admin-subtitle">
        Ø¯Ø³ØªØ±Ø³ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ù‡ Ø¢Ù…Ø§Ø± Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÛŒØ³ØªÙ… | Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: <span id="lastUpdate">Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span>
      </div>
    </div>
    
    <!-- Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ -->
    <div class="admin-stats-grid">
      <div class="stat-card">
        <div class="stat-value" id="totalRevenue">0 Stars</div>
        <div class="stat-label">Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalSales">0</div>
        <div class="stat-label">ØªØ¹Ø¯Ø§Ø¯ ÙØ±ÙˆØ´</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalUsers">0</div>
        <div class="stat-label">Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="todayRevenue">0 Stars</div>
        <div class="stat-label">Ø¯Ø±Ø¢Ù…Ø¯ Ø§Ù…Ø±ÙˆØ²</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="popularTool">-</div>
        <div class="stat-label">Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† Ø§Ø¨Ø²Ø§Ø±</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="conversionRate">0%</div>
        <div class="stat-label">Ù†Ø±Ø® ØªØ¨Ø¯ÛŒÙ„</div>
      </div>
    </div>
    
    <!-- ØªØ¨â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª -->
    <div class="admin-tabs">
      <button class="tab-btn active" onclick="showTab('sales')">
        <i class="fas fa-shopping-cart"></i> ÙØ±ÙˆØ´â€ŒÙ‡Ø§
      </button>
      <button class="tab-btn" onclick="showTab('users')">
        <i class="fas fa-users"></i> Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
      </button>
      <button class="tab-btn" onclick="showTab('tools')">
        <i class="fas fa-tools"></i> Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§
      </button>
      <button class="tab-btn" onclick="showTab('analytics')">
        <i class="fas fa-chart-line"></i> Ø¢Ù†Ø§Ù„ÛŒØ²
      </button>
      <button class="tab-btn" onclick="showTab('downloads')">
        <i class="fas fa-download"></i> Ø¯Ø§Ù†Ù„ÙˆØ¯Ù‡Ø§
      </button>
      <button class="tab-btn" onclick="showTab('settings')">
        <i class="fas fa-cog"></i> ØªÙ†Ø¸ÛŒÙ…Ø§Øª
      </button>
    </div>
    
    <!-- Ù…Ø­ØªÙˆØ§ÛŒ ØªØ¨â€ŒÙ‡Ø§ -->
    <div id="sales-tab" class="tab-content active">
      <h3 style="color: #FFD700; margin-bottom: 20px;">Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±ÙˆØ´â€ŒÙ‡Ø§</h3>
      <div class="date-filter">
        <input type="date" id="startDate" class="date-input">
        <input type="date" id="endDate" class="date-input">
        <button class="control-btn refresh-btn" onclick="filterSales()">
          <i class="fas fa-filter"></i> ÙÛŒÙ„ØªØ±
        </button>
      </div>
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Ú©Ø§Ø±Ø¨Ø±</th>
              <th>Ø§Ø¨Ø²Ø§Ø±</th>
              <th>Ù…Ø¨Ù„Øº</th>
              <th>ØªØ§Ø±ÛŒØ®</th>
              <th>ÙˆØ¶Ø¹ÛŒØª</th>
              <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
            </tr>
          </thead>
          <tbody id="salesTableBody">
            <!-- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
          </tbody>
        </table>
      </div>
    </div>
    
    <div id="users-tab" class="tab-content">
      <h3 style="color: #FFD700; margin-bottom: 20px;">Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h3>
      <input type="text" class="search-box" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±..." onkeyup="searchUsers(this.value)">
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Ø§Ø·Ù„Ø§Ø¹Ø§Øª</th>
              <th>ØªØ¹Ø¯Ø§Ø¯ Ø®Ø±ÛŒØ¯</th>
              <th>Ú©Ù„ Ù‡Ø²ÛŒÙ†Ù‡</th>
              <th>Ø¢Ø®Ø±ÛŒÙ† Ø®Ø±ÛŒØ¯</th>
              <th>ÙˆØ¶Ø¹ÛŒØª</th>
            </tr>
          </thead>
          <tbody id="usersTableBody">
            <!-- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
          </tbody>
        </table>
      </div>
    </div>
    
    <div id="tools-tab" class="tab-content">
      <h3 style="color: #FFD700; margin-bottom: 20px;">Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§</h3>
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Ù†Ø§Ù… Ø§Ø¨Ø²Ø§Ø±</th>
              <th>ØªÛŒØ±</th>
              <th>Ù‚ÛŒÙ…Øª</th>
              <th>ØªØ¹Ø¯Ø§Ø¯ ÙØ±ÙˆØ´</th>
              <th>Ø¯Ø±Ø¢Ù…Ø¯</th>
              <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
            </tr>
          </thead>
          <tbody id="toolsTableBody">
            <!-- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
          </tbody>
        </table>
      </div>
    </div>
    
    <div id="analytics-tab" class="tab-content">
      <h3 style="color: #FFD700; margin-bottom: 20px;">Ø¢Ù†Ø§Ù„ÛŒØ² Ùˆ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§</h3>
      <div class="chart-container">
        <div class="chart-title">ğŸ“ˆ Ø¯Ø±Ø¢Ù…Ø¯ 7 Ø±ÙˆØ² Ú¯Ø°Ø´ØªÙ‡</div>
        <canvas id="revenueChart" height="100"></canvas>
      </div>
      <div class="chart-container">
        <div class="chart-title">ğŸ“Š ÙØ±ÙˆØ´ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªÛŒØ±</div>
        <canvas id="tierChart" height="100"></canvas>
      </div>
      <div class="chart-container">
        <div class="chart-title">ğŸ¯ 5 Ø§Ø¨Ø²Ø§Ø± Ù¾Ø±ÙØ±ÙˆØ´</div>
        <canvas id="topToolsChart" height="100"></canvas>
      </div>
    </div>
    
    <div id="downloads-tab" class="tab-content">
      <h3 style="color: #FFD700; margin-bottom: 20px;">ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø¯Ø§Ù†Ù„ÙˆØ¯Ù‡Ø§</h3>
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Ú©Ø§Ø±Ø¨Ø±</th>
              <th>Ø§Ø¨Ø²Ø§Ø±</th>
              <th>ØªØ§Ø±ÛŒØ® Ø¯Ø§Ù†Ù„ÙˆØ¯</th>
              <th>IP</th>
              <th>ÙˆØ¶Ø¹ÛŒØª</th>
            </tr>
          </thead>
          <tbody id="downloadsTableBody">
            <!-- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
          </tbody>
        </table>
      </div>
    </div>
    
    <div id="settings-tab" class="tab-content">
      <h3 style="color: #FFD700; margin-bottom: 20px;">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</h3>
      <div style="display: grid; gap: 20px;">
        <div style="background: #334155; padding: 20px; border-radius: 10px;">
          <h4 style="margin-bottom: 15px; color: #FFD700;">ğŸ›¡ï¸ Ø§Ù…Ù†ÛŒØª</h4>
          <button class="control-btn" onclick="regenerateToken()" style="background: #8b5cf6;">
            <i class="fas fa-key"></i> Ø§ÛŒØ¬Ø§Ø¯ ØªÙˆÚ©Ù† Ø§Ø¯Ù…ÛŒÙ† Ø¬Ø¯ÛŒØ¯
          </button>
        </div>
        
        <div style="background: #334155; padding: 20px; border-radius: 10px;">
          <h4 style="margin-bottom: 15px; color: #FFD700;">ğŸ“Š Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ</h4>
          <button class="control-btn export-btn" onclick="exportData()">
            <i class="fas fa-file-export"></i> Ø®Ø±ÙˆØ¬ÛŒ Excel
          </button>
          <button class="control-btn" onclick="backupDatabase()" style="background: #f59e0b;">
            <i class="fas fa-database"></i> Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø¨Ø§Ù†Ú© Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ
          </button>
        </div>
        
        <div style="background: #334155; padding: 20px; border-radius: 10px;">
          <h4 style="margin-bottom: 15px; color: #FFD700;">ğŸ”” Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ</h4>
          <label style="display: block; margin-bottom: 10px;">
            <input type="checkbox" id="emailNotifications" checked>
            Ø¯Ø±ÛŒØ§ÙØª Ø§ÛŒÙ…ÛŒÙ„ Ø¨Ø±Ø§ÛŒ ÙØ±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
          </label>
          <label style="display: block; margin-bottom: 10px;">
            <input type="checkbox" id="telegramNotifications" checked>
            Ø¯Ø±ÛŒØ§ÙØª Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† ØªÙ„Ú¯Ø±Ø§Ù…
          </label>
        </div>
      </div>
    </div>
    
    <!-- Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÛŒÙ†ÛŒ -->
    <div class="admin-controls">
      <input type="text" class="search-box" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§..." id="globalSearch">
      <button class="control-btn refresh-btn" onclick="loadAdminData()">
        <i class="fas fa-sync-alt"></i> Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
      </button>
      <button class="control-btn export-btn" onclick="exportToExcel()">
        <i class="fas fa-file-excel"></i> Ø®Ø±ÙˆØ¬ÛŒ Excel
      </button>
      <button class="control-btn logout-btn" onclick="logoutAdmin()">
        <i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬
      </button>
    </div>
  </div>

  <script>
    // ØªÙˆÚ©Ù† Ø§Ø¯Ù…ÛŒÙ† Ø§Ø² URL
    const urlParams = new URLSearchParams(window.location.search);
    const adminToken = urlParams.get('admin_token');
    
    // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ³ØªÛŒ (Ø¯Ø± Ù†Ø³Ø®Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø² API Ù…ÛŒâ€ŒØ¢ÛŒØ¯)
    const sampleData = {
      sales: [
        { id: 1001, userId: 5001, toolId: 1, toolName: "Analytics 001", amount: 199, date: "2024-01-15", status: "paid" },
        { id: 1002, userId: 5002, toolId: 3, toolName: "ChessNowBot 004", amount: 599, date: "2024-01-14", status: "paid" },
        { id: 1003, userId: 5003, toolId: 35, toolName: "Stars Payments", amount: 899, date: "2024-01-14", status: "paid" },
        { id: 1004, userId: 5004, toolId: 16, toolName: "Next.js Template", amount: 799, date: "2024-01-13", status: "pending" },
        { id: 1005, userId: 5005, toolId: 7, toolName: "Issues Tracker", amount: 299, date: "2024-01-12", status: "failed" },
      ],
      users: [
        { id: 5001, name: "John Doe", purchases: 3, totalSpent: 1097, lastPurchase: "2024-01-15", status: "active" },
        { id: 5002, name: "Alice Smith", purchases: 1, totalSpent: 599, lastPurchase: "2024-01-14", status: "active" },
        { id: 5003, name: "Bob Johnson", purchases: 5, totalSpent: 2895, lastPurchase: "2024-01-14", status: "premium" },
        { id: 5004, name: "Charlie Brown", purchases: 2, totalSpent: 1098, lastPurchase: "2024-01-13", status: "active" },
        { id: 5005, name: "David Wilson", purchases: 0, totalSpent: 0, lastPurchase: "-", status: "inactive" },
      ],
      tools: [
        { id: 1, name: "Analytics 001", tier: "basic", price: 199, sales: 45, revenue: 8955 },
        { id: 3, name: "ChessNowBot 004", tier: "pro", price: 599, sales: 28, revenue: 16772 },
        { id: 35, name: "Stars Payments", tier: "premium", price: 899, sales: 19, revenue: 17081 },
        { id: 16, name: "Next.js Template", tier: "premium", price: 799, sales: 32, revenue: 25568 },
        { id: 7, name: "Issues Tracker", tier: "basic", price: 299, sales: 67, revenue: 20033 },
      ],
      downloads: [
        { id: 3001, userId: 5001, toolId: 1, date: "2024-01-15 14:30", ip: "192.168.1.1", status: "success" },
        { id: 3002, userId: 5002, toolId: 3, date: "2024-01-14 11:22", ip: "192.168.1.2", status: "success" },
        { id: 3003, userId: 5003, toolId: 35, date: "2024-01-14 09:45", ip: "192.168.1.3", status: "success" },
        { id: 3004, userId: 5004, toolId: 16, date: "2024-01-13 16:18", ip: "192.168.1.4", status: "pending" },
      ]
    };
    
    let charts = {};
    
    // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ†
    function checkAdminAccess() {
      const validTokens = ["GOLDEN_TMA_ADMIN_2024", "SUPER_ADMIN_SECRET", "MASTER_KEY_123"];
      
      if (!adminToken || !validTokens.includes(adminToken)) {
        document.body.innerHTML = `
          <div style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: #0f172a;
            color: #fff;
            text-align: center;
            padding: 20px;
          ">
            <i class="fas fa-lock" style="font-size: 4rem; color: #ef4444; margin-bottom: 20px;"></i>
            <h1 style="color: #FFD700; margin-bottom: 10px;">Ø¯Ø³ØªØ±Ø³ÛŒ ØºÛŒØ±Ù…Ø¬Ø§Ø²</h1>
            <p style="color: #94a3b8; margin-bottom: 30px; max-width: 500px;">
              Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯. Ù„Ø·ÙØ§Ù‹ Ø¨Ø§ Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ… ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯.
            </p>
            <button onclick="window.history.back()" style="
              padding: 12px 24px;
              background: #3b82f6;
              color: white;
              border: none;
              border-radius: 8px;
              font-size: 1rem;
              cursor: pointer;
            ">
              Ø¨Ø§Ø²Ú¯Ø´Øª
            </button>
          </div>
        `;
        return false;
      }
      return true;
    }
    
    // Ù†Ù…Ø§ÛŒØ´ ØªØ¨â€ŒÙ‡Ø§
    function showTab(tabName) {
      // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØªØ¨â€ŒÙ‡Ø§
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Ù†Ù…Ø§ÛŒØ´ ØªØ¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
      document.getElementById(tabName + '-tab').classList.add('active');
      
      // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ù…Ø±Ø¨ÙˆØ·Ù‡
      event.target.classList.add('active');
      
      // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¨
      loadTabData(tabName);
    }
    
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¨
    function loadTabData(tabName) {
      switch(tabName) {
        case 'sales':
          loadSalesData();
          break;
        case 'users':
          loadUsersData();
          break;
        case 'tools':
          loadToolsData();
          break;
        case 'analytics':
          loadAnalyticsData();
          break;
        case 'downloads':
          loadDownloadsData();
          break;
        case 'settings':
          loadSettingsData();
          break;
      }
    }
    
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ
    function loadAdminData() {
      // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¢Ù…Ø§Ø± Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡
      const totalRevenue = sampleData.sales
        .filter(sale => sale.status === 'paid')
        .reduce((sum, sale) => sum + sale.amount, 0);
      
      const totalSales = sampleData.sales.filter(sale => sale.status === 'paid').length;
      const totalUsers = sampleData.users.length;
      
      const today = new Date().toISOString().split('T')[0];
      const todayRevenue = sampleData.sales
        .filter(sale => sale.date === today && sale.status === 'paid')
        .reduce((sum, sale) => sum + sale.amount, 0);
      
      // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±
      document.getElementById('totalRevenue').textContent = totalRevenue + ' Stars';
      document.getElementById('totalSales').textContent = totalSales;
      document.getElementById('totalUsers').textContent = totalUsers;
      document.getElementById('todayRevenue').textContent = todayRevenue + ' Stars';
      document.getElementById('lastUpdate').textContent = new Date().toLocaleString('fa-IR');
      
      // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† Ø§Ø¨Ø²Ø§Ø±
      const toolSales = {};
      sampleData.sales.forEach(sale => {
        if (sale.status === 'paid') {
          toolSales[sale.toolName] = (toolSales[sale.toolName] || 0) + 1;
        }
      });
      
      const popularTool = Object.entries(toolSales).sort((a, b) => b[1] - a[1])[0];
      document.getElementById('popularTool').textContent = popularTool ? popularTool[0] : '-';
      
      // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ø±Ø® ØªØ¨Ø¯ÛŒÙ„ (ÙØ±Ø¶ÛŒ)
      const conversionRate = Math.round((totalSales / totalUsers) * 100);
      document.getElementById('conversionRate').textContent = conversionRate + '%';
      
      // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªØ¨ ÙØ¹Ø§Ù„
      const activeTab = document.querySelector('.tab-content.active').id.replace('-tab', '');
      loadTabData(activeTab);
    }
    
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´
    function loadSalesData() {
      const tbody = document.getElementById('salesTableBody');
      tbody.innerHTML = '';
      
      sampleData.sales.forEach(sale => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>#${sale.id}</td>
          <td>User #${sale.userId}</td>
          <td>${sale.toolName}</td>
          <td><strong>${sale.amount} Stars</strong></td>
          <td>${sale.date}</td>
          <td><span class="status-${sale.status}">${sale.status.toUpperCase()}</span></td>
          <td>
            <button onclick="viewSaleDetails(${sale.id})" style="
              padding: 5px 10px;
              background: #3b82f6;
              color: white;
              border: none;
              border-radius: 5px;
              cursor: pointer;
              margin-right: 5px;
            ">
              <i class="fas fa-eye"></i>
            </button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }
    
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
    function loadUsersData() {
      const tbody = document.getElementById('usersTableBody');
      tbody.innerHTML = '';
      
      sampleData.users.forEach(user => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>#${user.id}</td>
          <td>
            <strong>${user.name}</strong><br>
            <small style="color: #94a3b8;">ID: ${user.id}</small>
          </td>
          <td>${user.purchases}</td>
          <td><strong>${user.totalSpent} Stars</strong></td>
          <td>${user.lastPurchase}</td>
          <td><span class="status-${user.status === 'inactive' ? 'failed' : 'paid'}">${user.status.toUpperCase()}</span></td>
        `;
        tbody.appendChild(row);
      });
    }
    
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§
    function loadToolsData() {
      const tbody = document.getElementById('toolsTableBody');
      tbody.innerHTML = '';
      
      sampleData.tools.forEach(tool => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${tool.id}</td>
          <td><strong>${tool.name}</strong></td>
          <td><span class="tool-badge">${tool.tier}</span></td>
          <td>${tool.price} Stars</td>
          <td>${tool.sales}</td>
          <td><strong>${tool.revenue} Stars</strong></td>
          <td>
            <button onclick="editTool(${tool.id})" style="
              padding: 5px 10px;
              background: #10b981;
              color: white;
              border: none;
              border-radius: 5px;
              cursor: pointer;
              margin-right: 5px;
            ">
              <i class="fas fa-edit"></i>
            </button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }
    
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ù†Ø§Ù„ÛŒØ²Ù‡Ø§
    function loadAnalyticsData() {
      // Ù†Ù…ÙˆØ¯Ø§Ø± Ø¯Ø±Ø¢Ù…Ø¯ 7 Ø±ÙˆØ² Ú¯Ø°Ø´ØªÙ‡
      const revenueCtx = document.getElementById('revenueChart').getContext('2d');
      if (charts.revenue) charts.revenue.destroy();
      
      charts.revenue = new Chart(revenueCtx, {
        type: 'line',
        data: {
          labels: ['6 Ø±ÙˆØ² Ù‚Ø¨Ù„', '5 Ø±ÙˆØ² Ù‚Ø¨Ù„', '4 Ø±ÙˆØ² Ù‚Ø¨Ù„', '3 Ø±ÙˆØ² Ù‚Ø¨Ù„', 'Ù¾Ø±ÛŒØ±ÙˆØ²', 'Ø¯ÛŒØ±ÙˆØ²', 'Ø§Ù…Ø±ÙˆØ²'],
          datasets: [{
            label: 'Ø¯Ø±Ø¢Ù…Ø¯ (Stars)',
            data: [1200, 1900, 1500, 2300, 1800, 2500, 2100],
            borderColor: '#FFD700',
            backgroundColor: 'rgba(255, 215, 0, 0.1)',
            borderWidth: 2,
            fill: true,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              labels: { color: '#fff' }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: 'rgba(255,255,255,0.1)' },
              ticks: { color: '#94a3b8' }
            },
            x: {
              grid: { color: 'rgba(255,255,255,0.1)' },
              ticks: { color: '#94a3b8' }
            }
          }
        }
      });
      
      // Ù†Ù…ÙˆØ¯Ø§Ø± ÙØ±ÙˆØ´ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªÛŒØ±
      const tierCtx = document.getElementById('tierChart').getContext('2d');
      if (charts.tier) charts.tier.destroy();
      
      charts.tier = new Chart(tierCtx, {
        type: 'doughnut',
        data: {
          labels: ['Basic', 'Pro', 'Premium'],
          datasets: [{
            data: [45, 30, 25],
            backgroundColor: [
              'rgba(34, 197, 94, 0.8)',
              'rgba(59, 130, 246, 0.8)',
              'rgba(168, 85, 247, 0.8)'
            ],
            borderColor: [
              '#22c55e',
              '#3b82f6',
              '#a855f7'
            ],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'bottom',
              labels: { color: '#fff' }
            }
          }
        }
      });
      
      // Ù†Ù…ÙˆØ¯Ø§Ø± Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù¾Ø±ÙØ±ÙˆØ´
      const toolsCtx = document.getElementById('topToolsChart').getContext('2d');
      if (charts.topTools) charts.topTools.destroy();
      
      charts.topTools = new Chart(toolsCtx, {
        type: 'bar',
        data: {
          labels: ['Next.js Template', 'Stars Payments', 'Chess Bot', 'Analytics', 'Vue Template'],
          datasets: [{
            label: 'ØªØ¹Ø¯Ø§Ø¯ ÙØ±ÙˆØ´',
            data: [32, 19, 28, 45, 15],
            backgroundColor: 'rgba(255, 215, 0, 0.7)',
            borderColor: '#FFD700',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          indexAxis: 'y',
          plugins: {
            legend: {
              labels: { color: '#fff' }
            }
          },
          scales: {
            x: {
              beginAtZero: true,
              grid: { color: 'rgba(255,255,255,0.1)' },
              ticks: { color: '#94a3b8' }
            },
            y: {
              grid: { color: 'rgba(255,255,255,0.1)' },
              ticks: { color: '#94a3b8' }
            }
          }
        }
      });
    }
    
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯
    function loadDownloadsData() {
      const tbody = document.getElementById('downloadsTableBody');
      tbody.innerHTML = '';
      
      sampleData.downloads.forEach(download => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>#${download.id}</td>
          <td>User #${download.userId}</td>
          <td>Tool #${download.toolId}</td>
          <td>${download.date}</td>
          <td><code>${download.ip}</code></td>
          <td><span class="status-${download.status}">${download.status.toUpperCase()}</span></td>
        `;
        tbody.appendChild(row);
      });
    }
    
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
    function loadSettingsData() {
      // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø² localStorage Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
      const emailNotif = localStorage.getItem('emailNotifications') !== 'false';
      const telegramNotif = localStorage.getItem('telegramNotifications') !== 'false';
      
      document.getElementById('emailNotifications').checked = emailNotif;
      document.getElementById('telegramNotifications').checked = telegramNotif;
    }
    
    // Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
    function searchUsers(query) {
      // Ø¯Ø± Ù†Ø³Ø®Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø² API Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
      console.log('Searching users:', query);
    }
    
    // ÙÛŒÙ„ØªØ± ÙØ±ÙˆØ´â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ§Ø±ÛŒØ®
    function filterSales() {
      const startDate = document.getElementById('startDate').value;
      const endDate = document.getElementById('endDate').value;
      
      // Ø¯Ø± Ù†Ø³Ø®Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø² API Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
      console.log('Filtering sales from', startDate, 'to', endDate);
    }
    
    // Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª ÙØ±ÙˆØ´
    function viewSaleDetails(saleId) {
      const sale = sampleData.sales.find(s => s.id === saleId);
      if (sale) {
        alert(`Ø¬Ø²Ø¦ÛŒØ§Øª ÙØ±ÙˆØ´ #${saleId}\n\n` +
              `Ú©Ø§Ø±Ø¨Ø±: #${sale.userId}\n` +
              `Ø§Ø¨Ø²Ø§Ø±: ${sale.toolName}\n` +
              `Ù…Ø¨Ù„Øº: ${sale.amount} Stars\n` +
              `ØªØ§Ø±ÛŒØ®: ${sale.date}\n` +
              `ÙˆØ¶Ø¹ÛŒØª: ${sale.status}`);
      }
    }
    
    // ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø¨Ø²Ø§Ø±
    function editTool(toolId) {
      alert(`ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø¨Ø²Ø§Ø± #${toolId}\n\nØ¯Ø± Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„ØŒ ÙØ±Ù… ÙˆÛŒØ±Ø§ÛŒØ´ Ø¨Ø§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯.`);
    }
    
    // Ø§ÛŒØ¬Ø§Ø¯ ØªÙˆÚ©Ù† Ø§Ø¯Ù…ÛŒÙ† Ø¬Ø¯ÛŒØ¯
    function regenerateToken() {
      const newToken = 'ADMIN_' + Math.random().toString(36).substr(2, 16).toUpperCase();
      if (confirm(`ØªÙˆÚ©Ù† Ø¬Ø¯ÛŒØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ø´ÙˆØ¯ØŸ\n\n${newToken}\n\nØ§ÛŒÙ† ØªÙˆÚ©Ù† Ø±Ø§ Ø¯Ø± Ø¬Ø§ÛŒÛŒ Ø§Ù…Ù† Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯.`)) {
        alert(`ØªÙˆÚ©Ù† Ø¬Ø¯ÛŒØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯:\n${newToken}`);
      }
    }
    
    // Ø®Ø±ÙˆØ¬ÛŒ Ú¯Ø±ÙØªÙ† Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
    function exportData() {
      alert('Ø¯Ø± Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„ØŒ ÙØ§ÛŒÙ„ Excel Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.');
    }
    
    // Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø¨Ø§Ù†Ú© Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ
    function backupDatabase() {
      alert('Ø¯Ø± Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„ØŒ ÙØ§ÛŒÙ„ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.');
    }
    
    // Ø®Ø±ÙˆØ¬ÛŒ Excel
    function exportToExcel() {
      alert('Ø¯Ø± Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„ØŒ ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Excel Ø®Ø±ÙˆØ¬ÛŒ Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.');
    }
    
    // Ø®Ø±ÙˆØ¬ Ø§Ø² Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†
    function logoutAdmin() {
      if (confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø² Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† Ø®Ø§Ø±Ø¬ Ø´ÙˆÛŒØ¯ØŸ')) {
        window.location.href = 'index.html';
      }
    }
    
    // Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
    document.getElementById('emailNotifications').addEventListener('change', function() {
      localStorage.setItem('emailNotifications', this.checked);
    });
    
    document.getElementById('telegramNotifications').addEventListener('change', function() {
      localStorage.setItem('telegramNotifications', this.checked);
    });
    
    // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
    if (checkAdminAccess()) {
      loadAdminData();
      
      // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ø± 30 Ø«Ø§Ù†ÛŒÙ‡
      setInterval(loadAdminData, 30000);
      
      // ØªØ§Ø±ÛŒØ® Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„ØªØ±Ù‡Ø§
      const today = new Date();
      const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
      
      document.getElementById('startDate').value = weekAgo.toISOString().split('T')[0];
      document.getElementById('endDate').value = today.toISOString().split('T')[0];
    }
  </script>
</body>
</html>
